{"ast":null,"code":"var _jsxFileName = \"G:\\\\web3assignment-master\\\\ass-1\\\\src\\\\App.js\";\nimport React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport HomeView from \"./components/HomeView.js\";\nimport Header from \"./components/Header.js\";\nimport { Route } from \"react-router-dom\";\nimport DefaultView from \"./components/DefaultView.js\";\nimport { CSSTransition } from \"react-transition-group\";\nimport Modal from \"./components/Modal.js\";\nimport CastView from \"./components/CastView\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.searchTitle = e => {\n      let curList = [];\n      let newList = [];\n\n      if (e.target.value !== \"\") {\n        curList = this.state.movies;\n        newList = curList.filter(titles => {\n          const lc = titles.title.toLowerCase();\n          const filter = e.target.value.toLowerCase();\n          return lc.includes(filter);\n        });\n      } else {\n        newList = this.state.movies;\n      }\n\n      this.setState({\n        filteredByTitles: newList\n      });\n      console.log(this.state.filteredByTitles);\n    };\n\n    this.toggleModal = () => {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    };\n\n    this.updateState = () => {\n      console.log(this.state.isLoading); //Checks if local storage is set and if there is a state\n\n      if (localStorage.getItem(\"moviesAPI\") !== null) {\n        //this.sortLS();\n        console.log(\"API exists in Local Storage\");\n        this.setState({\n          movies: JSON.parse(localStorage.getItem(\"moviesAPI\")),\n          isLoading: false\n        }); // this.sortByTitle();\n      } else {\n        console.log(\"API does not exist in Local Storage\");\n      }\n    };\n\n    this.handleAddFav = movie => {\n      let currentFav = this.state.favourites.slice(0);\n      let newFav = [...currentFav];\n      newFav.push(movie);\n      console.log(newFav);\n\n      if (!currentFav.includes(movie.id)) {\n        this.setState({\n          favourites: newFav\n        });\n        console.log(this.state.favourites);\n        localStorage.setItem(\"altFav\", newFav);\n      }\n\n      if (this.state.favourites.find(m => m.title === movie.title)) {\n        this.handleDeleteFav(movie);\n      }\n    };\n\n    this.handleDeleteFav = movie => {\n      const list = this.state.favourites.slice(0);\n      list.splice(list.indexOf(movie), 1);\n      this.setState({\n        favourites: list\n      });\n      localStorage.setItem(\"altFav\", list);\n    };\n\n    this.clickedSearchAll = () => {\n      this.setState({\n        searchedAll: true\n      }, () => {\n        console.log(this.state.filteredByTitles);\n        this.checkSearchType();\n      });\n      console.log(this.state.searchedAll);\n    };\n\n    this.clickedSearchTitle = () => {\n      this.setState({\n        searchedAll: false\n      }, () => {\n        console.log(this.state.filteredByTitles);\n        this.checkSearchType();\n      });\n      console.log(this.state.searchedAll);\n      return this.state.filteredByTitles;\n    };\n\n    this.sortAlpha = () => {\n      let tempMovie = Array.from(this.state.movies);\n      tempMovie.sort((a, b) => a.title - b.title);\n      this.setState({\n        movies: tempMovie\n      });\n    };\n\n    this.checkSearchType = async () => {\n      if (this.state.searchedAll) {\n        this.setState({\n          listOfSearchedMovies: this.state.movies\n        });\n      } else if (!this.state.searchedAll) {\n        this.setState({\n          listOfSearchedMovies: this.state.filteredByTitles\n        });\n      }\n\n      console.log(this.state.listOfSearchedMovies);\n    };\n\n    this.state = {\n      isLoading: true,\n      searchedAll: true,\n      movies: [],\n      IsOpen: false,\n      favourites: [],\n      altFav: [],\n      filteredByTitles: [],\n      listOfSearchedMovies: []\n    };\n  } //movie search by title\n\n\n  //moveis data\n  componentsWillUpdate(json) {\n    //Converts fetched JSON data into string and store in local storage\n    localStorage.setItem(\"moviesAPI\", JSON.stringify(json));\n  }\n\n  async componentDidMount() {\n    if (localStorage.getItem(\"moviesAPI\") === null) {\n      try {\n        const url = \"http://www.randyconnolly.com/funwebdev/3rd/api/movie/movies-brief.php?id=ALL\";\n        const response = await fetch(url);\n        const jsonData = await response.json();\n        this.componentsWillUpdate(jsonData);\n        console.log(\"Fetched Data Successful. \");\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      console.log(\"Data already loaded.\");\n    }\n\n    this.updateState();\n  } //adding fav event handler\n\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: props => React.createElement(HomeView, {\n        movies: this.state.movies,\n        clickedSearchAll: this.clickedSearchAll,\n        searchedAll: this.state.searchedAll,\n        clickedSearchTitle: this.clickedSearchTitle,\n        sortAlpha: this.sortAlpha //filterTitle={this.filterTitle}\n        ,\n        clickedSearchTitle: this.clickedSearchTitle,\n        searchTitle: this.searchTitle // checkSearchType={this.checkSearchType}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/DefaultView\",\n      exact: true,\n      render: props => React.createElement(DefaultView, {\n        movies: this.state.movies,\n        clickedSearchAll: this.clickedSearchAll,\n        searchedAll: this.state.searchedAll,\n        clickedSearchTitle: this.clickedSearchTitle,\n        sortAlpha: this.sortAlpha,\n        show: this.state.isOpen,\n        onClose: this.toggleModal,\n        handleAddFav: this.handleAddFav,\n        handleDeleteFav: this.handleDeleteFav,\n        favourites: this.state.favourites,\n        filterTitle: this.filterTitle,\n        listOfSearchedMovies: this.state.listOfSearchedMovies,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/CastView\",\n      exact: true,\n      render: props => React.createElement(CastView, {\n        handleAddFav: this.handleAddFav,\n        handleDeleteFav: this.handleDeleteFav,\n        favourites: this.state.favourites,\n        show: this.state.isOpen,\n        onClose: this.toggleModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Modal, {\n      show: this.state.isOpen,\n      onClose: this.toggleModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["G:/web3assignment-master/ass-1/src/App.js"],"names":["React","HomeView","Header","Route","DefaultView","CSSTransition","Modal","CastView","App","Component","constructor","props","searchTitle","e","curList","newList","target","value","state","movies","filter","titles","lc","title","toLowerCase","includes","setState","filteredByTitles","console","log","toggleModal","isOpen","updateState","isLoading","localStorage","getItem","JSON","parse","handleAddFav","movie","currentFav","favourites","slice","newFav","push","id","setItem","find","m","handleDeleteFav","list","splice","indexOf","clickedSearchAll","searchedAll","checkSearchType","clickedSearchTitle","sortAlpha","tempMovie","Array","from","sort","a","b","listOfSearchedMovies","IsOpen","altFav","componentsWillUpdate","json","stringify","componentDidMount","url","response","fetch","jsonData","error","render","filterTitle"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,OAAO,WAAP;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,QAAP,MAAqB,uBAArB;;AAEA,MAAMC,GAAN,SAAkBR,KAAK,CAACS,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAcrBC,WAdqB,GAcNC,CAAD,IAAO;AACnB,UAAIC,OAAO,GAAG,EAAd;AACA,UAAIC,OAAO,GAAG,EAAd;;AAEA,UAAIF,CAAC,CAACG,MAAF,CAASC,KAAT,KAAkB,EAAtB,EAAyB;AACvBH,QAAAA,OAAO,GAAG,KAAKI,KAAL,CAAWC,MAArB;AAEAJ,QAAAA,OAAO,GAAGD,OAAO,CAACM,MAAR,CAAeC,MAAM,IAAG;AAChC,gBAAMC,EAAE,GAAGD,MAAM,CAACE,KAAP,CAAaC,WAAb,EAAX;AACA,gBAAMJ,MAAM,GAAGP,CAAC,CAACG,MAAF,CAASC,KAAT,CAAeO,WAAf,EAAf;AACA,iBAAOF,EAAE,CAACG,QAAH,CAAYL,MAAZ,CAAP;AAED,SALS,CAAV;AAMD,OATD,MAUA;AACEL,QAAAA,OAAO,GAAG,KAAKG,KAAL,CAAWC,MAArB;AAED;;AACD,WAAKO,QAAL,CAAc;AACZC,QAAAA,gBAAgB,EAAEZ;AADN,OAAd;AAGAa,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWS,gBAAvB;AACD,KApCoB;;AAAA,SAuCnBG,WAvCmB,GAuCL,MAAM;AAClB,WAAKJ,QAAL,CAAc;AACZK,QAAAA,MAAM,EAAE,CAAC,KAAKb,KAAL,CAAWa;AADR,OAAd;AAGD,KA3CkB;;AAAA,SAkDnBC,WAlDmB,GAkDL,MAAM;AAClBJ,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWe,SAAvB,EADkB,CAElB;;AACA,UAAIC,YAAY,CAACC,OAAb,CAAqB,WAArB,MAAsC,IAA1C,EAAgD;AAC9C;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA,aAAKH,QAAL,CAAc;AACZP,UAAAA,MAAM,EAAEiB,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CADI;AAEZF,UAAAA,SAAS,EAAE;AAFC,SAAd,EAH8C,CAO9C;AACD,OARD,MAQO;AACLL,QAAAA,OAAO,CAACC,GAAR,CAAY,qCAAZ;AACD;AACF,KAhEkB;;AAAA,SAoFnBS,YApFmB,GAoFJC,KAAK,IAAI;AACtB,UAAIC,UAAU,GAAG,KAAKtB,KAAL,CAAWuB,UAAX,CAAsBC,KAAtB,CAA4B,CAA5B,CAAjB;AACA,UAAIC,MAAM,GAAG,CAAC,GAAGH,UAAJ,CAAb;AAEAG,MAAAA,MAAM,CAACC,IAAP,CAAYL,KAAZ;AAEAX,MAAAA,OAAO,CAACC,GAAR,CAAYc,MAAZ;;AACA,UAAI,CAACH,UAAU,CAACf,QAAX,CAAoBc,KAAK,CAACM,EAA1B,CAAL,EAAoC;AAClC,aAAKnB,QAAL,CAAc;AACZe,UAAAA,UAAU,EAAEE;AADA,SAAd;AAGAf,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWuB,UAAvB;AACAP,QAAAA,YAAY,CAACY,OAAb,CAAqB,QAArB,EAA+BH,MAA/B;AACD;;AACD,UAAI,KAAKzB,KAAL,CAAWuB,UAAX,CAAsBM,IAAtB,CAA2BC,CAAC,IAAIA,CAAC,CAACzB,KAAF,KAAYgB,KAAK,CAAChB,KAAlD,CAAJ,EAA8D;AAC5D,aAAK0B,eAAL,CAAqBV,KAArB;AACD;AACF,KArGkB;;AAAA,SAuGnBU,eAvGmB,GAuGDV,KAAK,IAAI;AACzB,YAAMW,IAAI,GAAG,KAAKhC,KAAL,CAAWuB,UAAX,CAAsBC,KAAtB,CAA4B,CAA5B,CAAb;AACAQ,MAAAA,IAAI,CAACC,MAAL,CAAYD,IAAI,CAACE,OAAL,CAAab,KAAb,CAAZ,EAAiC,CAAjC;AACA,WAAKb,QAAL,CAAc;AACZe,QAAAA,UAAU,EAAES;AADA,OAAd;AAGAhB,MAAAA,YAAY,CAACY,OAAb,CAAqB,QAArB,EAA+BI,IAA/B;AACD,KA9GkB;;AAAA,SAgHnBG,gBAhHmB,GAgHA,MAAM;AACvB,WAAK3B,QAAL,CAAc;AACZ4B,QAAAA,WAAW,EAAE;AADD,OAAd,EAEG,MAAM;AACP1B,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWS,gBAAvB;AACA,aAAK4B,eAAL;AAAuB,OAJzB;AAMA3B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWoC,WAAvB;AACD,KAxHkB;;AAAA,SA0HnBE,kBA1HmB,GA0HE,MAAM;AACzB,WAAK9B,QAAL,CAAc;AACZ4B,QAAAA,WAAW,EAAE;AADD,OAAd,EAEG,MAAM;AACP1B,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWS,gBAAvB;AACA,aAAK4B,eAAL;AAAuB,OAJzB;AAMA3B,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWoC,WAAvB;AACA,aAAQ,KAAKpC,KAAL,CAAWS,gBAAnB;AACD,KAnIkB;;AAAA,SAqInB8B,SArImB,GAqIP,MAAM;AAChB,UAAIC,SAAS,GAAGC,KAAK,CAACC,IAAN,CAAW,KAAK1C,KAAL,CAAWC,MAAtB,CAAhB;AACAuC,MAAAA,SAAS,CAACG,IAAV,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACvC,KAAF,GAAUwC,CAAC,CAACxC,KAArC;AACA,WAAKG,QAAL,CAAc;AAAEP,QAAAA,MAAM,EAAEuC;AAAV,OAAd;AACD,KAzIkB;;AAAA,SA2InBH,eA3ImB,GA2ID,YAAY;AAE5B,UAAI,KAAKrC,KAAL,CAAWoC,WAAf,EAA4B;AAC1B,aAAK5B,QAAL,CAAc;AAACsC,UAAAA,oBAAoB,EAAE,KAAK9C,KAAL,CAAWC;AAAlC,SAAd;AACD,OAFD,MAGK,IAAI,CAAC,KAAKD,KAAL,CAAWoC,WAAhB,EAA6B;AAChC,aAAK5B,QAAL,CAAc;AAACsC,UAAAA,oBAAoB,EAAE,KAAK9C,KAAL,CAAWS;AAAlC,SAAd;AACD;;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAW8C,oBAAvB;AACD,KApJkB;;AAEjB,SAAK9C,KAAL,GAAa;AACXe,MAAAA,SAAS,EAAE,IADA;AAEXqB,MAAAA,WAAW,EAAE,IAFF;AAGXnC,MAAAA,MAAM,EAAE,EAHG;AAIX8C,MAAAA,MAAM,EAAE,KAJG;AAKXxB,MAAAA,UAAU,EAAE,EALD;AAMXyB,MAAAA,MAAM,EAAE,EANG;AAOXvC,MAAAA,gBAAgB,EAAC,EAPN;AAQXqC,MAAAA,oBAAoB,EAAE;AARX,KAAb;AAUD,GAb+B,CAclC;;;AA+BE;AACAG,EAAAA,oBAAoB,CAACC,IAAD,EAAO;AACzB;AACAlC,IAAAA,YAAY,CAACY,OAAb,CAAqB,WAArB,EAAkCV,IAAI,CAACiC,SAAL,CAAeD,IAAf,CAAlC;AACD;;AAkBD,QAAME,iBAAN,GAA0B;AACxB,QAAIpC,YAAY,CAACC,OAAb,CAAqB,WAArB,MAAsC,IAA1C,EAAgD;AAC9C,UAAI;AACF,cAAMoC,GAAG,GACP,8EADF;AAEA,cAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA5B;AACA,cAAMG,QAAQ,GAAG,MAAMF,QAAQ,CAACJ,IAAT,EAAvB;AACA,aAAKD,oBAAL,CAA0BO,QAA1B;AACA9C,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD,OAPD,CAOE,OAAO8C,KAAP,EAAc;AACd/C,QAAAA,OAAO,CAAC+C,KAAR,CAAcA,KAAd;AACD;AACF,KAXD,MAWO;AACL/C,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD;;AACD,SAAKG,WAAL;AACD,GAnF+B,CAoFlC;;;AAoEE4C,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,GADP;AAEE,MAAA,KAAK,MAFP;AAGE,MAAA,MAAM,EAAEjE,KAAK,IACX,oBAAC,QAAD;AACE,QAAA,MAAM,EAAE,KAAKO,KAAL,CAAWC,MADrB;AAEE,QAAA,gBAAgB,EAAE,KAAKkC,gBAFzB;AAGE,QAAA,WAAW,EAAE,KAAKnC,KAAL,CAAWoC,WAH1B;AAIE,QAAA,kBAAkB,EAAE,KAAKE,kBAJ3B;AAKE,QAAA,SAAS,EAAE,KAAKC,SALlB,CAME;AANF;AAOE,QAAA,kBAAkB,EAAE,KAAKD,kBAP3B;AAQE,QAAA,WAAW,EAAG,KAAK5C,WARrB,CASC;AATD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAkBE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,cADP;AAEE,MAAA,KAAK,MAFP;AAGE,MAAA,MAAM,EAAED,KAAK,IACX,oBAAC,WAAD;AACE,QAAA,MAAM,EAAE,KAAKO,KAAL,CAAWC,MADrB;AAEE,QAAA,gBAAgB,EAAE,KAAKkC,gBAFzB;AAGE,QAAA,WAAW,EAAE,KAAKnC,KAAL,CAAWoC,WAH1B;AAIE,QAAA,kBAAkB,EAAE,KAAKE,kBAJ3B;AAKE,QAAA,SAAS,EAAE,KAAKC,SALlB;AAME,QAAA,IAAI,EAAE,KAAKvC,KAAL,CAAWa,MANnB;AAOE,QAAA,OAAO,EAAE,KAAKD,WAPhB;AAQE,QAAA,YAAY,EAAE,KAAKQ,YARrB;AASE,QAAA,eAAe,EAAE,KAAKW,eATxB;AAUE,QAAA,UAAU,EAAE,KAAK/B,KAAL,CAAWuB,UAVzB;AAWE,QAAA,WAAW,EAAE,KAAKoC,WAXpB;AAYE,QAAA,oBAAoB,EAAE,KAAK3D,KAAL,CAAW8C,oBAZnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,EAsCG,oBAAC,KAAD;AACC,MAAA,IAAI,EAAC,WADN;AAEC,MAAA,KAAK,MAFN;AAGC,MAAA,MAAM,EAAErD,KAAK,IACf,oBAAC,QAAD;AACM,QAAA,YAAY,EAAE,KAAK2B,YADzB;AAEM,QAAA,eAAe,EAAE,KAAKW,eAF5B;AAGM,QAAA,UAAU,EAAE,KAAK/B,KAAL,CAAWuB,UAH7B;AAIM,QAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWa,MAJvB;AAKM,QAAA,OAAO,EAAE,KAAKD,WALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtCH,EAiDE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWa,MAAxB;AAAgC,MAAA,OAAO,EAAE,KAAKD,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAjDF,CADF,CADF;AAwDD;;AAjN+B;;AAoNlC,eAAetB,GAAf","sourcesContent":["import React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport HomeView from \"./components/HomeView.js\";\nimport Header from \"./components/Header.js\";\nimport { Route } from \"react-router-dom\";\nimport DefaultView from \"./components/DefaultView.js\";\nimport { CSSTransition } from \"react-transition-group\";\nimport Modal from \"./components/Modal.js\";\nimport CastView from \"./components/CastView\"\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      searchedAll: true,\n      movies: [],\n      IsOpen: false,\n      favourites: [],\n      altFav: [],\n      filteredByTitles:[],\n      listOfSearchedMovies: []\n    };\n  }\n//movie search by title\nsearchTitle = (e) => {\n  let curList = [];\n  let newList = [];\n\n  if (e.target.value !==\"\"){\n    curList = this.state.movies;\n\n    newList = curList.filter(titles =>{\n      const lc = titles.title.toLowerCase();\n      const filter = e.target.value.toLowerCase();\n      return lc.includes(filter);\n\n    });\n  }else\n  {\n    newList = this.state.movies;\n    \n  }\n  this.setState({\n    filteredByTitles: newList\n  });\n  console.log(this.state.filteredByTitles)\n}\n \n   //checks modal state open or close\n  toggleModal = () => {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  };\n  //moveis data\n  componentsWillUpdate(json) {\n    //Converts fetched JSON data into string and store in local storage\n    localStorage.setItem(\"moviesAPI\", JSON.stringify(json));\n  }\n\n  updateState = () => {\n    console.log(this.state.isLoading);\n    //Checks if local storage is set and if there is a state\n    if (localStorage.getItem(\"moviesAPI\") !== null) {\n      //this.sortLS();\n      console.log(\"API exists in Local Storage\");\n      this.setState({\n        movies: JSON.parse(localStorage.getItem(\"moviesAPI\")),\n        isLoading: false\n      });\n      // this.sortByTitle();\n    } else {\n      console.log(\"API does not exist in Local Storage\");\n    }\n  };\n\n  async componentDidMount() {\n    if (localStorage.getItem(\"moviesAPI\") === null) {\n      try {\n        const url =\n          \"http://www.randyconnolly.com/funwebdev/3rd/api/movie/movies-brief.php?id=ALL\";\n        const response = await fetch(url);\n        const jsonData = await response.json();\n        this.componentsWillUpdate(jsonData);\n        console.log(\"Fetched Data Successful. \");\n      } catch (error) {\n        console.error(error);\n      }\n    } else {\n      console.log(\"Data already loaded.\");\n    }\n    this.updateState();\n  }\n//adding fav event handler\n  handleAddFav = movie => {\n    let currentFav = this.state.favourites.slice(0);\n    let newFav = [...currentFav];\n\n    newFav.push(movie);\n\n    console.log(newFav);\n    if (!currentFav.includes(movie.id)) {\n      this.setState({\n        favourites: newFav\n      });\n      console.log(this.state.favourites);\n      localStorage.setItem(\"altFav\", newFav);\n    }\n    if (this.state.favourites.find(m => m.title === movie.title)) {\n      this.handleDeleteFav(movie);\n    }\n  };\n//removing fav handler\n  handleDeleteFav = movie => {\n    const list = this.state.favourites.slice(0);\n    list.splice(list.indexOf(movie), 1);\n    this.setState({\n      favourites: list\n    });\n    localStorage.setItem(\"altFav\", list);\n  };\n//checking if show all movie button pressed\n  clickedSearchAll = () => {\n    this.setState({\n      searchedAll: true \n    }, () => {\n      console.log(this.state.filteredByTitles);\n      this.checkSearchType()});\n    \n    console.log(this.state.searchedAll);\n  };\n//checking of filter by title button pressed\n  clickedSearchTitle = () => {\n    this.setState({\n      searchedAll: false\n    }, () => {\n      console.log(this.state.filteredByTitles);\n      this.checkSearchType()});\n  \n    console.log(this.state.searchedAll);\n    return (this.state.filteredByTitles);\n  };\n//sorting movies aray from json daya alphabetically\n  sortAlpha = () => {\n    let tempMovie = Array.from(this.state.movies);\n    tempMovie.sort((a, b) => a.title - b.title);\n    this.setState({ movies: tempMovie });\n  };\n  //fill in the array for if title is searched\n  checkSearchType = async () => {\n\n    if (this.state.searchedAll) {\n      this.setState({listOfSearchedMovies: this.state.movies});\n    } \n    else if (!this.state.searchedAll) {\n      this.setState({listOfSearchedMovies: this.state.filteredByTitles});\n    }\n    console.log(this.state.listOfSearchedMovies);\n  };\n\n\n  render() {\n    return (\n      <div className=\"App\">\n        <main>\n          <Route\n            path=\"/\"\n            exact\n            render={props => (\n              <HomeView\n                movies={this.state.movies}\n                clickedSearchAll={this.clickedSearchAll}\n                searchedAll={this.state.searchedAll}\n                clickedSearchTitle={this.clickedSearchTitle}\n                sortAlpha={this.sortAlpha}\n                //filterTitle={this.filterTitle}\n                clickedSearchTitle={this.clickedSearchTitle}\n                searchTitle ={this.searchTitle}\n               // checkSearchType={this.checkSearchType}\n              />\n            )}\n          />\n          <Route\n            path=\"/DefaultView\"\n            exact\n            render={props => (\n              <DefaultView\n                movies={this.state.movies}\n                clickedSearchAll={this.clickedSearchAll}\n                searchedAll={this.state.searchedAll}\n                clickedSearchTitle={this.clickedSearchTitle}\n                sortAlpha={this.sortAlpha}\n                show={this.state.isOpen}\n                onClose={this.toggleModal}\n                handleAddFav={this.handleAddFav}\n                handleDeleteFav={this.handleDeleteFav}\n                favourites={this.state.favourites}\n                filterTitle={this.filterTitle}\n                listOfSearchedMovies={this.state.listOfSearchedMovies}\n              />\n            )}\n          />\n           <Route\n            path=\"/CastView\"\n            exact\n            render={props => (\n          <CastView  \n                handleAddFav={this.handleAddFav}\n                handleDeleteFav={this.handleDeleteFav}\n                favourites={this.state.favourites}\n                show={this.state.isOpen}\n                onClose={this.toggleModal}/>\n                )} />\n          <Modal show={this.state.isOpen} onClose={this.toggleModal}>\n            </Modal>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}